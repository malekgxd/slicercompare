{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://slicercompare.app/schemas/result-data.schema.json",
  "title": "Slicing Result Data",
  "description": "JSON Schema for validating slicing result data extracted from G-code files. Based on Story 1.3 G-code parsing strategy.",
  "type": "object",
  "properties": {
    "print_time_seconds": {
      "type": "integer",
      "minimum": 0,
      "description": "Estimated print time in seconds. Extracted from G-code metadata (e.g., ';TIME:' comment).",
      "examples": [3600, 7200, 14400]
    },
    "filament_usage_grams": {
      "type": "number",
      "minimum": 0,
      "description": "Total filament used in grams. Extracted from G-code metadata.",
      "examples": [12.5, 45.3, 123.7]
    },
    "filament_usage_mm": {
      "type": "number",
      "minimum": 0,
      "description": "Total filament length in millimeters. Extracted from G-code metadata. Optional field.",
      "examples": [4567.89, 15234.56]
    },
    "support_material_grams": {
      "type": "number",
      "minimum": 0,
      "description": "Support material used in grams. 0 if no supports enabled. Optional field.",
      "examples": [0, 2.5, 8.3]
    },
    "layer_count": {
      "type": "integer",
      "minimum": 1,
      "description": "Total number of layers in the print. Calculated from layer height and model height.",
      "examples": [50, 100, 250]
    },
    "gcode_file_path": {
      "type": "string",
      "minLength": 1,
      "description": "Path to G-code file in Supabase Storage bucket (e.g., 'generated-gcode/session-uuid/config-uuid.gcode').",
      "examples": [
        "generated-gcode/abc123/config-xyz.gcode",
        "gcode-output/2024-10-31/result-456.gcode"
      ]
    },
    "parsed_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when G-code was parsed and metrics extracted. Optional field.",
      "examples": ["2024-10-31T14:30:00Z", "2024-11-01T09:15:30.123Z"]
    },
    "model_height_mm": {
      "type": "number",
      "minimum": 0,
      "description": "Total height of the printed model in millimeters. Optional field.",
      "examples": [10.0, 50.5, 150.2]
    },
    "estimated_cost": {
      "type": "number",
      "minimum": 0,
      "description": "Estimated material cost based on filament usage and price per gram. Optional field.",
      "examples": [0.25, 1.50, 5.00]
    }
  },
  "required": [
    "print_time_seconds",
    "filament_usage_grams",
    "layer_count",
    "gcode_file_path"
  ],
  "additionalProperties": false,
  "examples": [
    {
      "print_time_seconds": 3600,
      "filament_usage_grams": 12.5,
      "filament_usage_mm": 4567.89,
      "support_material_grams": 0,
      "layer_count": 100,
      "gcode_file_path": "generated-gcode/session-abc/config-xyz.gcode",
      "parsed_at": "2024-10-31T14:30:00Z"
    },
    {
      "print_time_seconds": 7200,
      "filament_usage_grams": 45.3,
      "filament_usage_mm": 15234.56,
      "support_material_grams": 8.3,
      "layer_count": 250,
      "gcode_file_path": "generated-gcode/session-def/config-uvw.gcode",
      "parsed_at": "2024-10-31T15:45:30Z",
      "model_height_mm": 50.0,
      "estimated_cost": 1.25
    }
  ]
}
